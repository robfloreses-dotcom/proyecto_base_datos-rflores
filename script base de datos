CREATE SCHEMA IF NOT EXISTS rflores;

CREATE TABLE rflores.cliente (
  id_cliente SERIAL PRIMARY KEY,
  nombre VARCHAR(100) NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL,
  telefono VARCHAR(20),
  fecha_creacion DATE DEFAULT CURRENT_DATE
);

CREATE TABLE rflores.categoria (
  id_categoria SERIAL PRIMARY KEY,
  nombre VARCHAR(100) NOT NULL,
  fecha_creacion DATE DEFAULT CURRENT_DATE
);

CREATE TABLE rflores.producto (
  id_producto SERIAL PRIMARY KEY,
  nombre VARCHAR(100) NOT NULL,
  precio DECIMAL(10,2) NOT NULL,
  id_categoria INT NOT NULL,
  fecha_creacion DATE DEFAULT CURRENT_DATE,
  FOREIGN KEY (id_categoria) REFERENCES rflores.categoria(id_categoria)
);

CREATE TABLE rflores.venta (
  id_venta SERIAL PRIMARY KEY,
  id_cliente INT NOT NULL,
  fecha_venta DATE NOT NULL,
  total DECIMAL(10,2),
  FOREIGN KEY (id_cliente) REFERENCES rflores.cliente(id_cliente)
);

CREATE TABLE rflores.detalle_venta (
  id_detalle SERIAL PRIMARY KEY,
  id_venta INT NOT NULL,
  id_producto INT NOT NULL,
  cantidad INT NOT NULL,
  precio_unitario DECIMAL(10,2) NOT NULL,
  subtotal DECIMAL(10,2) NOT NULL,
  FOREIGN KEY (id_venta) REFERENCES rflores.venta(id_venta),
  FOREIGN KEY (id_producto) REFERENCES rflores.producto(id_producto)
);


